!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("jquery"),require("knockout"),exports):"function"==typeof define&&define.amd?define(["jquery","knockout","exports"],e):e(jQuery,ko,ko.validate={})}(function(e,a,t){function r(e){var t="max"===e;return function(r,i){if(a.validate.utils.isEmptyVal(r))return!0;var n,s;void 0===i.typeAttr?(s="text",n=i):(s=i.typeAttr,n=i.value),isNaN(n)||n instanceof Date||(s="number");var o,l,u;switch(s.toLowerCase()){case"week":if(o=/^(\d{4})-W(\d{2})$/,l=r.match(o),null===l)throw new Error("Invalid value for "+e+" attribute for week input.  Should look like '2000-W33' http://www.w3.org/TR/html-markup/input.week.html#input.week.attrs.min");return u=n.match(o),u?t?l[1]<u[1]||l[1]===u[1]&&l[2]<=u[2]:l[1]>u[1]||l[1]===u[1]&&l[2]>=u[2]:!1;case"month":if(o=/^(\d{4})-(\d{2})$/,l=r.match(o),null===l)throw new Error("Invalid value for "+e+" attribute for month input.  Should look like '2000-03' http://www.w3.org/TR/html-markup/input.month.html#input.month.attrs.min");return u=n.match(o),u?t?l[1]<u[1]||l[1]===u[1]&&l[2]<=u[2]:l[1]>u[1]||l[1]===u[1]&&l[2]>=u[2]:!1;case"number":case"range":return t?!isNaN(r)&&parseFloat(r)<=parseFloat(n):!isNaN(r)&&parseFloat(r)>=parseFloat(n);default:return t?n>=r:r>=n}}}if("undefined"==typeof a)throw new Error("Knockout is required, please ensure it is loaded before loading this validation plug-in");a.validate=t,a.validate.utils=function(){return{getBindingHandlerValue:function(e,a){return a().hasOwnProperty("value")?a().value:a().hasOwnProperty("textInput")?a().textInput:a().hasOwnProperty("checked")?a().checked:void 0},isArray:function(e){return e.isArray||"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return null!==e&&"object"==typeof e},getValue:function(e){return a.utils.unwrapObservable(e)},hasAttribute:function(e,a){return null!==e.getAttribute(a)},getAttribute:function(e,a){return e.getAttribute(a)},setAttribute:function(e,a,t){return e.setAttribute(a,t)},isNumber:function(e){return!isNaN(e)},isEmptyVal:function(e){return void 0===e?!0:null===e?!0:""===e?!0:void 0},formatMessage:function(e,t,r){var i=a.validate.utils;if(i.isObject(t)&&t.typeAttr&&(t=t.value),"function"==typeof e)return e(t,r);var n=a.unwrap(t);return null==n&&(n=[]),i.isArray(n)||(n=[n]),e.replace(/{(\d+)}/gi,function(e,a){return"undefined"!=typeof n[a]?n[a]:e})}}}();var i={useRequiredMarker:!0,classElementError:"error",classMessageError:"error-message",classHasRequired:"has-required",classHasError:"has-error",classGroupContainer:"form-group",appendMessageToContainer:!0,appendErrorsToRoot:!1,appendErrorsToContext:!1,appendErrorsToParentComponentContext:!1},n=(a.validate,a.utils.extend({},i));a.validate.utils.resetConfig=function(){a.utils.extend(n,i)},a.validate.configuration=n,a.validate.rules={},a.validate.rules.required={validator:function(e,a){var t;return void 0===e||null===e?!a:(t=e,"string"==typeof e&&(t=String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")),a?(t+"").length>0:!0)},message:"Obrigatório"},a.validate.rules.min={validator:r("min"),message:"Insira um valor maior ou igual a {0}."},a.validate.rules.max={validator:r("max"),message:"Insira um valor menor ou igual a {0}."},a.validate.rules.email={validator:function(e,t){return t?a.validate.utils.isEmptyVal(e)||t&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e):!0},message:"Endereço de e-mail inválido"},a.validate.rules.date={validator:function(e,t){return t?a.validate.utils.isEmptyVal(e)||t&&!/Invalid|NaN/.test(new Date(e)):!0},message:"Data inválida"},a.validate.rules.dateISO={validator:function(e,t){return t?a.validate.utils.isEmptyVal(e)||t&&/^\d{4}[-/](?:0?[1-9]|1[012])[-/](?:0?[1-9]|[12][0-9]|3[01])$/.test(e):!0},message:"Data inválida"},a.validate.rules.number={validator:function(e,t){return t?a.validate.utils.isEmptyVal(e)||t&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e):!0},message:"Insira somente números"},a.validate.rules.digit={validator:function(e,t){return t?a.validate.utils.isEmptyVal(e)||t&&/^\d+$/.test(e):!0},message:"Insira somente dígitos"},a.validate.rules.minLength={validator:function(e,t){if(a.validate.utils.isEmptyVal(e))return!0;var r=a.validate.utils.isNumber(e)?""+e:e;return r.length>=t},message:"Insira pelo menos {0} caracter(es)"},a.validate.rules.cep={validator:function(e,t){return t?a.validate.utils.isEmptyVal(e)?!0:(e=e.replace(/\D/g,""),8===e.length):!0},message:"CEP inválido"},a.validate.rules.maxLength={validator:function(e,t){if(a.validate.utils.isEmptyVal(e))return!0;var r=a.validate.utils.isNumber(e)?""+e:e;return r.length<=t},message:"Insira no máximo {0} caracter(es)"},a.validate.rules.pattern={validator:function(e,t){return a.validate.utils.isEmptyVal(e)||null!==e.toString().match(t)},message:"Valor inválido"},a.validate.rules.phone={validator:function(e,t){return t?a.validate.utils.isEmptyVal(e)?!0:(e=e.replace(/\D/g,""),11===e.length||10===e.length):!0},message:"Telefone inválido"},a.validate.rules.phoneUS={validator:function(e,t){return t?a.validate.utils.isEmptyVal(e)?!0:"string"!=typeof e?!1:(e=e.replace(/\s+/g,""),t&&e.length>9&&e.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)):!0},message:"Telefone inválido"},a.validate.rules.equalValue={validator:function(e,t){return t?a.validate.utils.isEmptyVal(e)?!0:e==a.validate.utils.getValue(t):!0},message:"Valores devem ser iguais"},a.validate.rules.equal={validator:function(e,t){var r=t;return a.validate.utils.isEmptyVal(e)&&a.validate.utils.isEmptyVal(r)?!0:e===a.validate.utils.getValue(r)},message:"Valores devem ser iguais"},a.validate.rules.notEqual={validator:function(e,t){var r=t;return a.validate.utils.isEmptyVal(e)&&a.validate.utils.isEmptyVal(r)?!0:e!==a.validate.utils.getValue(r)},message:"Valores não podem ser iguais"},a.validate.rules.customError={validator:function(e){var t=a.utils.unwrapObservable(e);return a.validate.utils.isEmptyVal(t)?!0:t},message:"Custom error"},a.validate.setValidationProperties=function(t){var r=function(){var t=this;this.invalidFields=a.observableArray([]),this.isValid=a.computed(function(){return 0===t.invalidFields().length}),this.isValidShowErrors=function(){return t.isValid()?!0:(t.showErrors(!0),!1)},this.showErrors=function(r){void 0===r&&(r=!0),a.utils.arrayForEach(t.invalidFields(),function(a,t){var r=e("#"+a),i=r.data("options"),n=r.closest("."+i.classGroupContainer).addClass(i.classHasError);r.addClass(i.classElementError),i.appendMessageToContainer?n.find("."+i.classMessageError).show():r.next().show(),0===t&&(r.is(":visible")?(e(window).scrollTop(r.offset().top-120),r.focus()):n.length>0?e(window).scrollTop(n.offset().top-120):e(window).scrollTop(r.offset().top-120))})}};a.utils.extend(t,new r)},a.bindingHandlers.validateOptions=function(){return{init:function(e,t,r,i,n){var s=a.utils.unwrapObservable(t()),o=n.extend({validateOptions:s});return a.applyBindingsToDescendants(o,e),{controlsDescendantBindings:!0}}}}(),a.bindingHandlers.validate={init:function(t,r,i,n,s){var o=a.validate.utils.getBindingHandlerValue(r,i),n=s.$component?s.$component:n,l=function(){return s.hasOwnProperty("validateOptions")?e.extend(!0,{},a.validate.configuration,s.validateOptions):a.validate.configuration}(),t=e(t),u=function(e){n.invalidFields.remove(e)},d=function(e){e.closest("."+l.classGroupContainer).addClass(l.classHasRequired)},p=function(e){e.closest("."+l.classGroupContainer).removeClass(l.classHasRequired)},v=function(e,a){l.appendMessageToContainer?e.closest("."+l.classGroupContainer).find("."+l.classMessageError).text(a):e.next().text(a)},c=function(e){-1==n.invalidFields.indexOf(e)&&n.invalidFields.push(e)},F=function(e){var a=e.closest("."+l.classGroupContainer);a.removeClass(l.classHasError),e.removeClass(l.classElementError),l.appendMessageToContainer?a.find("."+l.classMessageError).hide():e.next().hide()},f=function(e,a){var t=e.closest("."+l.classGroupContainer);t.addClass(l.classHasError),e.addClass(l.classElementError),l.appendMessageToContainer?t.find("."+l.classMessageError).show():e.next().show()},m=function(e,t){var r=!0,i=[],n="",s=!1,o=null;e.hasOwnProperty("rules")&&(e=e.rules);for(var l in e)if("value"!==l&&"options"!==l)if(a.validate.rules[l]){var u=a.validate.rules[l],n=e[l],d=u.validator(t,a.utils.unwrapObservable(n));"required"===l&&(s=a.utils.unwrapObservable(n)),u.hasOwnProperty("valid")&&(d=u.valid),d||(o=null!==e[l]&&e[l].hasOwnProperty("message")?e[l].message:u.message,i.push(a.validate.utils.formatMessage(o,n)),r=!1)}else console&&console.error('ValidateWarning: The rule "'+l+'" is not defined, check the rules defined ->',a.validate.rules);return{messages:i,valid:r,hasRequiredRule:s}};return void 0===o?void(console&&console.error('ValidateError: Missing "value" bind parameter. Should be a "value", "textInput", "checked" or a "value" parameter inside the validate handler (validate: { value: observable, required: true })',t)):(r().hasOwnProperty("options")&&(l=e.extend(!0,{},l,r().options)),l.appendMessageToContainer?e('<span class="'+l.classMessageError+'" style="display: none"></span>').appendTo(t.closest("."+l.classGroupContainer)):e('<span class="'+l.classMessageError+'" style="display: none"></span>').insertAfter(t),t.data("options",l),l.hasOwnProperty("appendErrorsToRoot")&&l.appendErrorsToRoot?n=s.$root:l.hasOwnProperty("appendErrorsToContext")&&l.appendErrorsToContext?n=s[l.appendErrorsToContext]:l.hasOwnProperty("appendErrorsToParentComponentContext")&&l.appendErrorsToParentComponentContext&&(n=s.$parentContext.hasOwnProperty("$component")?s.$parentContext.$component:s.$parent),n.hasOwnProperty("isValid")||a.validate.setValidationProperties(n,l),void a.computed(function(){var e=a.utils.unwrapObservable(o),i=a.computedContext.isInitial(),n={},s=t.attr("id");if(0===s.length)throw console&&console.error(t),"ValidateError: Element to validate must have an ID";n=m(r(),e),v(t,n.messages.join(". ")),n.hasRequiredRule?d(t):p(t),n.valid?(u(s),F(t)):(c(s),i||n.hasRequiredRule||f(t))}))},update:function(e,a,t,r,i){}},a.applyBindingsWithValidation=function(e,t,r){a.validate.setValidationProperties(e,r),a.applyBindings(e,t)};var s,o={};a.validate.defineLocale=function(e,a){return e&&a?(o[e.toLowerCase()]=a,a):null},a.validate.locale=function(e){if(e){if(e=e.toLowerCase(),!o.hasOwnProperty(e))throw new Error("Localization "+e+" has not been loaded.");a.validate.localize(o[e]),s=e}return s},a.validate.localize=function(e){var t=a.validate.rules;for(var r in e)t.hasOwnProperty(r)&&(t[r].message=e[r])},function(){var e={},t=a.validate.rules;for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r].message);a.validate.defineLocale("pt-br",e)}(),s="pt-br"});