!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("jquery"),require("knockout"),exports):"function"==typeof define&&define.amd?define(["jquery","knockout","exports"],e):e(jQuery,ko,ko.validate={})}(function(e,t,a){function r(e){var a="max"===e;return function(r,n){if(t.validate.utils.isEmptyVal(r))return!0;var i,s;void 0===n.typeAttr?(s="text",i=n):(s=n.typeAttr,i=n.value),isNaN(i)||i instanceof Date||(s="number");var o,l,u;switch(s.toLowerCase()){case"week":if(o=/^(\d{4})-W(\d{2})$/,l=r.match(o),null===l)throw new Error("Invalid value for "+e+" attribute for week input.  Should look like '2000-W33' http://www.w3.org/TR/html-markup/input.week.html#input.week.attrs.min");return u=i.match(o),u?a?l[1]<u[1]||l[1]===u[1]&&l[2]<=u[2]:l[1]>u[1]||l[1]===u[1]&&l[2]>=u[2]:!1;case"month":if(o=/^(\d{4})-(\d{2})$/,l=r.match(o),null===l)throw new Error("Invalid value for "+e+" attribute for month input.  Should look like '2000-03' http://www.w3.org/TR/html-markup/input.month.html#input.month.attrs.min");return u=i.match(o),u?a?l[1]<u[1]||l[1]===u[1]&&l[2]<=u[2]:l[1]>u[1]||l[1]===u[1]&&l[2]>=u[2]:!1;case"number":case"range":return a?!isNaN(r)&&parseFloat(r)<=parseFloat(i):!isNaN(r)&&parseFloat(r)>=parseFloat(i);default:return a?i>=r:r>=i}}}if("undefined"==typeof t)throw new Error("Knockout is required, please ensure it is loaded before loading this validation plug-in");t.validate=a,t.validate.utils=function(){return{getBindingHandlerValue:function(e,t){return t().hasOwnProperty("value")?t().value:t().hasOwnProperty("textInput")?t().textInput:t().hasOwnProperty("checked")?t().checked:void 0},isArray:function(e){return e.isArray||"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return null!==e&&"object"==typeof e},getValue:function(e){return t.utils.unwrapObservable(e)},hasAttribute:function(e,t){return null!==e.getAttribute(t)},getAttribute:function(e,t){return e.getAttribute(t)},setAttribute:function(e,t,a){return e.setAttribute(t,a)},isNumber:function(e){return!isNaN(e)},isEmptyVal:function(e){return void 0===e?!0:null===e?!0:""===e?!0:void 0},formatMessage:function(e,a,r){var n=t.validate.utils;if(n.isObject(a)&&a.typeAttr&&(a=a.value),"function"==typeof e)return e(a,r);var i=t.unwrap(a);return null==i&&(i=[]),n.isArray(i)||(i=[i]),e.replace(/{(\d+)}/gi,function(e,t){return"undefined"!=typeof i[t]?i[t]:e})}}}();var n={useRequiredMarker:!0,classElementError:"error",classMessageError:"error-message",classHasRequired:"has-required",classHasError:"has-error",classGroupContainer:"form-group",appendMessageToContainer:!0,appendErrorsToRoot:!1,appendErrorsToContext:!1,appendErrorsToParentComponentContext:!1},i=(t.validate,t.utils.extend({},n));t.validate.utils.resetConfig=function(){t.utils.extend(i,n)},t.validate.configuration=i,t.validate.rules={},t.validate.rules.required={validator:function(e,t){var a;return void 0===e||null===e?!t:(a=e,"string"==typeof e&&(a=String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")),t?(a+"").length>0:!0)},message:"Obrigatório"},t.validate.rules.min={validator:r("min"),message:"Insira um valor maior ou igual a {0}."},t.validate.rules.max={validator:r("max"),message:"Insira um valor menor ou igual a {0}."},t.validate.rules.email={validator:function(e,a){return a?t.validate.utils.isEmptyVal(e)||a&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e):!0},message:"Endereço de e-mail inválido"},t.validate.rules.date={validator:function(e,a){return a?t.validate.utils.isEmptyVal(e)||a&&!/Invalid|NaN/.test(new Date(e)):!0},message:"Data inválida"},t.validate.rules.dateISO={validator:function(e,a){return a?t.validate.utils.isEmptyVal(e)||a&&/^\d{4}[-/](?:0?[1-9]|1[012])[-/](?:0?[1-9]|[12][0-9]|3[01])$/.test(e):!0},message:"Data inválida"},t.validate.rules.number={validator:function(e,a){return a?t.validate.utils.isEmptyVal(e)||a&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e):!0},message:"Insira somente números"},t.validate.rules.digit={validator:function(e,a){return a?t.validate.utils.isEmptyVal(e)||a&&/^\d+$/.test(e):!0},message:"Insira somente dígitos"},t.validate.rules.minLength={validator:function(e,a){if(t.validate.utils.isEmptyVal(e))return!0;var r=t.validate.utils.isNumber(e)?""+e:e;return r.length>=a},message:"Insira pelo menos {0} caracter(es)"},t.validate.rules.cep={validator:function(e,a){return a?t.validate.utils.isEmptyVal(e)?!0:(e=e.replace(/\D/g,""),8===e.length):!0},message:"CEP inválido"},t.validate.rules.maxLength={validator:function(e,a){if(t.validate.utils.isEmptyVal(e))return!0;var r=t.validate.utils.isNumber(e)?""+e:e;return r.length<=a},message:"Insira no máximo {0} caracter(es)"},t.validate.rules.pattern={validator:function(e,a){return t.validate.utils.isEmptyVal(e)||null!==e.toString().match(a)},message:"Valor inválido"},t.validate.rules.phone={validator:function(e,a){return a?t.validate.utils.isEmptyVal(e)?!0:(e=e.replace(/\D/g,""),11===e.length||10===e.length):!0},message:"Telefone inválido"},t.validate.rules.phoneUS={validator:function(e,a){return a?t.validate.utils.isEmptyVal(e)?!0:"string"!=typeof e?!1:(e=e.replace(/\s+/g,""),a&&e.length>9&&e.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)):!0},message:"Telefone inválido"},t.validate.rules.equal={validator:function(e,a){var r=a;return t.validate.utils.isEmptyVal(e)&&t.validate.utils.isEmptyVal(r)?!0:e===t.validate.utils.getValue(r)},message:"Valores devem ser iguais"},t.validate.rules.notEqual={validator:function(e,a){var r=a;return t.validate.utils.isEmptyVal(e)&&t.validate.utils.isEmptyVal(r)?!0:e!==t.validate.utils.getValue(r)},message:"Valores não podem ser iguais"},t.validate.setValidationProperties=function(a){var r=function(){var a=this;this.invalidFields=t.observableArray([]),this.isValid=t.computed(function(){return 0===a.invalidFields().length}),this.isValidShowErrors=function(){return a.isValid()?!0:(a.showErrors(!0),!1)},this.showErrors=function(r){void 0===r&&(r=!0),t.utils.arrayForEach(a.invalidFields(),function(t,a){var r=e("#"+t),n=r.data("options"),i=r.closest("."+n.classGroupContainer).addClass(n.classHasError);r.addClass(n.classElementError),n.appendMessageToContainer?i.find("."+n.classMessageError).show():r.next().show(),0===a&&(r.is(":visible")?(e(window).scrollTop(r.offset().top-100),r.focus()):i[0]?i[0].scrollIntoView({behavior:"smooth"}):r[0].scrollIntoView({behavior:"smooth"}))})}};t.utils.extend(a,new r)},t.bindingHandlers.validateOptions=function(){return{init:function(e,a,r,n,i){var s=t.utils.unwrapObservable(a()),o=i.extend({validateOptions:s});return t.applyBindingsToDescendants(o,e),{controlsDescendantBindings:!0}}}}(),t.bindingHandlers.validate={init:function(a,r,n,i,s){var o=t.validate.utils.getBindingHandlerValue(r,n),i=s.$component?s.$component:i,l=function(){return s.hasOwnProperty("validateOptions")?e.extend(!0,{},t.validate.configuration,s.validateOptions):t.validate.configuration}(),a=e(a),u=function(e){i.invalidFields.remove(e)},d=function(e){e.closest("."+l.classGroupContainer).addClass(l.classHasRequired)},p=function(e){e.closest("."+l.classGroupContainer).removeClass(l.classHasRequired)},v=function(e,t){l.appendMessageToContainer?e.closest("."+l.classGroupContainer).find("."+l.classMessageError).text(t):e.next().text(t)},c=function(e){i.invalidFields.push(e)},F=function(e){var t=e.closest("."+l.classGroupContainer);t.removeClass(l.classHasError),e.removeClass(l.classElementError),l.appendMessageToContainer?t.find("."+l.classMessageError).hide():e.next().hide()},f=function(e,t){var a=e.closest("."+l.classGroupContainer);a.addClass(l.classHasError),e.addClass(l.classElementError),l.appendMessageToContainer?a.find("."+l.classMessageError).show():e.next().show()},m=function(e,a){var r=!0,n=[],i="",s=!1,o=null;e.hasOwnProperty("rules")&&(e=e.rules);for(var l in e)if("value"!==l&&"options"!==l)if(t.validate.rules[l]){var u=t.validate.rules[l],i=e[l],d=u.validator(a,t.utils.unwrapObservable(i));"required"===l&&(s=i),u.hasOwnProperty("valid")&&(d=u.valid),d||(o=null!==e[l]&&e[l].hasOwnProperty("message")?e[l].message:u.message,n.push(t.validate.utils.formatMessage(o,i)),r=!1)}else console&&console.error('ValidateWarning: The rule "'+l+'" is not defined, check the rules defined ->',t.validate.rules);return{messages:n,valid:r,hasRequiredRule:s}};return void 0===o?void(console&&console.error('ValidateError: Missing "value" bind parameter. Should be a "value", "textInput", "checked" or a "value" parameter inside the validate handler (validate: { value: observable, required: true })',a)):(r().hasOwnProperty("options")&&(l=e.extend(!0,{},l,r().options)),l.appendMessageToContainer?e('<span class="'+l.classMessageError+'" style="display: none"></span>').appendTo(a.closest("."+l.classGroupContainer)):e('<span class="'+l.classMessageError+'" style="display: none"></span>').insertAfter(a),a.data("options",l),l.hasOwnProperty("appendErrorsToRoot")&&l.appendErrorsToRoot?i=s.$root:l.hasOwnProperty("appendErrorsToContext")&&l.appendErrorsToContext?i=s[l.appendErrorsToContext]:l.hasOwnProperty("appendErrorsToParentComponentContext")&&l.appendErrorsToParentComponentContext&&(i=s.$parentContext.$component),i.hasOwnProperty("isValid")||t.validate.setValidationProperties(i,l),void t.computed(function(){var e=t.utils.unwrapObservable(o),n=t.computedContext.isInitial(),i={},s=a.attr("id");if(0===s.length)throw console&&console.error(a),"ValidateError: Element to validate must have an ID";i=m(r(),e),v(a,i.messages.join(". ")),i.hasRequiredRule?d(a):p(a),i.valid?(u(s),F(a)):(c(s),n||i.hasRequiredRule||f(a))}))},update:function(e,t,a,r,n){}},t.bindingHandlers.validateForm={init:function(t,a,r,n,i){if("FORM"!==t.nodeName)throw"ValidateError: This validateForm handler should be used on a form element";var s=a();if(t.setAttribute("novalidate","novalidate"),$el=e(t),s.hasOwnProperty("submitHandler")){var o=function(){n.isValid()?s.submitHandler():n.showErrors()};$el.on("keydown",function(e){if(13===e.keyCode&&"TEXTAREA"!=e.target.tagName&&!e.target.classList.contains("note-editable")){if(e.target.classList.contains("modal"))return;e.target.blur(),o(),e.stopPropagation(),e.preventDefault()}}),$el.on("submit",function(e){document.activeElement.blur(),e.stopPropagation(),e.preventDefault(),o()})}}},t.applyBindingsWithValidation=function(e,a,r){t.validate.setValidationProperties(e,r),t.applyBindings(e,a)};var s,o={};t.validate.defineLocale=function(e,t){return e&&t?(o[e.toLowerCase()]=t,t):null},t.validate.locale=function(e){if(e){if(e=e.toLowerCase(),!o.hasOwnProperty(e))throw new Error("Localization "+e+" has not been loaded.");t.validate.localize(o[e]),s=e}return s},t.validate.localize=function(e){var a=t.validate.rules;for(var r in e)a.hasOwnProperty(r)&&(a[r].message=e[r])},function(){var e={},a=t.validate.rules;for(var r in a)a.hasOwnProperty(r)&&(e[r]=a[r].message);t.validate.defineLocale("pt-br",e)}(),s="pt-br"});